# Record Reference

Whereas there can be multiple releases about a contracting process, there should be a single **record** per contracting process, aggregating all the releases available for the contracting process.

A record **must** contain:

* An [ocid](../identifiers/#ocid)
* An array of **[releases](#release)** about this contracting process - either by providing a URL for where these releases can be found, or embedding a full copy of the release

This allows the record to function as an index of all the releases about a contracting process.

Records **should** contain:

* **compiledRelease** - the latest version of all open contracting process fields, represented using the release schema.

Records **may** contain:

* **versionedRelease** - containing the history of the data in the compiledRelease, with all known past values of any field and the release that information came from. 

The versioned release format is designed to support analysis of how data has changed between releases, and will often be generated by data users, rather than by publishers.

## Package Metadata

Records must be published within a [record package](record_package).

```eval_rst
.. jsonschema:: ../../build/current_lang/record-package-schema.json
    :include:
    :collapse: records

```

See the guidance on [package metadata](../reference/#package-metadata). In addition, a record package includes:

* `packages` - links to the release packages used to compile the records
* `records` - one or more records, each of which, at least, links to or embeds the releases about the contracting process that it describes

You can see this in the full example of a record below.

```eval_rst
.. jsoninclude:: ../examples/merging/versioned.json
   :jsonpointer:
   :expand: packages, records
   :title: Full_record

```

## Record structure

Each record package contains an array of one or more records, consisting of the following sections:

* Releases (required)
* Compiled Release (recommended)
* Versioned Release (optional)

### Release list

The releases that make up a contracting process can be provided in two ways:

* URLs and metadata for each release; or
* Embedded copies of the release;

If providing an array of URLs, it must be possible for a consuming application to look up each URL, retrieve a release package, and locate the release inside it. In order to locate the specific release inside a release package, the `id` of the release must be appended to the package URL using a fragment identifier.

An example releases section is given below.

```eval_rst
.. jsoninclude:: ../examples/merging/versioned.json
   :jsonpointer: /records/0
   :expand: releases, tag
   :title: releases

```

### Compiled Release

The compiled release is the latest version of all the data about this contracting process, and has the same schema as a release.

The process for creating a compiled release is described in the guidance on [merging](merging).

A compiled release provides a snapshot of the current state of a contracting process, and the contents must comply with the release schema, with the exception of any fields on which `"omitWhenMerged": true` is declared.

### Versioned Release

A versioned release contains the history of all the data in the compiled release, including which fields have changed, when they were changed, and the release which updated them.

This versioned information is valuable for many use cases relating to contract monitoring. However, it can add substantially to file sizes, and so where publishers do generate this at source, they can consider publishing versioned and non-versioned copies of the records.

Third parties can use the information in the releases list to fetch source data, compile and verify their own version history for a contract.

An example extract of the versioned information for a tender value is shown below. This makes visible the change in contract value from the planning to the tender stage, whilst currency, which was first encountered in the planning stage stayed unchanged.

```eval_rst
.. jsoninclude:: ../examples/merging/versioned.json
   :jsonpointer: /records/0/versionedRelease/tender/value
   :expand: amount, releaseTag
   :title: versioned

```
